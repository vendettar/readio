---
title: 技术路线图
---

# 技术路线图与架构演进

本文档追踪代码库的**技术演进**。
每一步都对应 `local/instructions/lite/` 中的特定指令文件。

---

## 1. 第一阶段：环境与基础设施（基础）
**目标**：确保稳定、一致且标准化的开发环境。

- [ ] **001**：设置依赖（强制使用 `date-fns`，禁用 `lodash`）。
- [x] **002**：标准化 `src/libs` 为 `src/lib`（已完成）。
- [ ] **003**：强化 DevOps（Node 引擎、严格的脚本）。
- [ ] **004**：Tailwind 配置（注册布局令牌）。
- [ ] **005**：准备标准库（批量安装 i18next、dropzone、sonner 等）。

---

## 2. 第二阶段：核心架构重构（外科手术）
**目标**：在构建功能之前修复关键架构缺陷（数据一致性、性能）。

- [ ] **006**：标准化 DB ID（从 `++id` 迁移到 `UUID`）。
- [ ] **007**：重构持久化（修复“双写”错误）。
- [ ] **008**：修复根性能（隔离音频渲染）。
- [ ] **009**：重构路由（修复重定向逻辑）。
- [ ] **010**：优化搜索数据（添加 Dexie 索引）。
- [ ] **011**：类型安全的 i18n 过渡（为 i18next 做准备）。
- [ ] **012**：提取通用组件 (DRY)。

---

## 3. 第三阶段：标准化（工业化）
**目标**：使用行业标准库替换“手写”逻辑。

- [ ] **013**：标准化 i18n（迁移到 `react-i18next`）。
- [ ] **014**：标准化表单（`react-hook-form` + `zod`）。
- [ ] **015**：标准化文件拖放（`react-dropzone`）。

---

## 4. 第四阶段：用户体验与美学升级（氛围感）
**目标**：将外观和感觉提升到“溢价/苹果风”。

- [ ] **016**：升级 UI 设计（玻璃拟态、语义化颜色）。
- [ ] **017**：安装 Sonner（替换 Radix Toast）。
- [ ] **018**：重构搜索 UI（迁移到 `cmdk`）。
- [ ] **019**：增强交互（热键与手势）。
- [ ] **020**：清理魔法值（移除 `z-[999]`、硬编码颜色）。
- [ ] **021**：集成 React Bits（动画）。
- [ ] **022**：优化排版（1.6 行高，流式缩放）。
- [ ] **023**：共享元素过渡（迷你播放器 -> 全屏播放器）。
- [ ] **024**：应用启动序列（Logo 动画）。

---

## 5. 第五阶段：弹性与功能（产品）
**目标**：现实世界中的健壮性（离线、电池、隐私）。

- [ ] **025**：实现离线模式。
- [ ] **026**：强化资源管理（撤销 Object URL）。
- [ ] **027**：集成 Media Session API（操作系统同步）。
- [ ] **028**：标签页同步（单例播放）。
- [ ] **029**：后台性能（电池优化）。
- [ ] **030**：逻辑属性（RTL 支持）。
- [ ] **031**：强化音频单元测试。
- [ ] **032**：功能：睡眠定时器 (P0)。
- [ ] **033**：功能：OPML 导入/导出 (P0)。
- [ ] **034**：功能：个人仓库（全量数据导出）。
- [ ] **035**：强化 PWA 元数据（iOS 图标）。
- [ ] **037**：实现 URL 别名（美化链接）。

---

## 6. 未来阶段：“混合后端” (v2.0)
**目标**：为高级用户提供可选的云端同步。

### 架构变更
```mermaid
graph TD
    A[Vite 客户端] -->|REST| B[Spring Boot API]
    A -->|直接| C[IndexedDB (离线缓存)]
    B --> D[PostgreSQL]
```

### 关键模块
1. **身份验证**：基于 JWT 的无状态认证。
2. **同步引擎**：“最后写入胜出”的同步策略。
3. **CORS 代理**：自托管代理。

---

## 7. SSR 策略（决策日志）

**结论**：**应用无需 SSR。**
- 核心应用是经过身份验证的/本地仪表板。SEO 无关紧要。
