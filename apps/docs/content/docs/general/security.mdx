---
title: Security & Privacy
---

# Security & Privacy Standards

Readio is committed to user data sovereignty and absolute security.

---

## 1. HTML Sanitization (Anti-XSS)

**Rule**: NEVER use `dangerouslySetInnerHTML` directly with raw data from RSS feeds or files.
- **Strictly Required**: All HTML content must be sanitized before rendering.
- **Tool**: Use `DOMPurify` (via the wrapper `src/lib/htmlUtils.ts`).
- **Policy**: Only safe tags (formatting, links) are allowed. Scripts, frames, and tracking pixels are stripped.

## 1.1 Content Security Policy (CSP) [Implemented]
- **Status**: Implemented via Instruction 041.
- **Goal**: Enforce strict CSP via **HTTP response headers** (server/edge), to limit script, media, and image sources.
- **Policy**: `default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob: https:; media-src 'self' blob: https:; connect-src 'self' https:; font-src 'self' data: https:; frame-ancestors 'none'; base-uri 'self';`
- **Flexibility**: `https:` is explicitly allowed for `connect-src` and `img-src` to support user-configured custom CORS proxies and various podcast artwork CDNs.
- **Implementation**:
  - **Vercel**: `vercel.json` sets `Content-Security-Policy` via response headers.
  - **Docker (Nginx)**: `nginx.conf` sets `Content-Security-Policy` via `add_header ... always;`.
  - **Forbidden**: Do **not** enforce CSP via an `index.html` `<meta http-equiv="Content-Security-Policy">` tag. It is not an equivalent control surface (notably for `frame-ancestors`).

## 1.2 Planned: Iframe Sandbox
- **Status**: Planned via Instruction 051.
- **Goal**: Isolate untrusted rich HTML in a sandboxed iframe when required.

## 2. Privacy & Data Sovereignty

### A. Proxy Privacy (Critical)
**Problem**: Third-party CORS proxies (like AllOrigins) see every URL you request.
**Rules**: 
- **User Choice**: Provide a toggle in Settings to disable public proxies.
- **Disclosure**: Warn users in the UI when a request is routed through a public proxy.
- **Sensitive Data**: Never pass authentication headers, API keys, or cookies through public proxies.

### B. Error Reporting Privacy [Implemented]
**Rule**: Do NOT collect or export Personally Identifiable Information (PII).
- **Redaction**: All diagnostic logs are passed through a `redact()` filter before being stored in the buffer or exported. 
- **Forbidden**: Logged strings must strip file names, local file paths (e.g., `/Users/username/`), and user emails. 
- **Allowed**: Generic error messages, browser version, and anonymized stack traces (all paths stripped of local usernames).

## 3. External Links
**Rule**: Use `src/lib/openExternal.ts` for all external navigation.
- **Requirements**: Must include `rel="noopener noreferrer"`.

## 4. Local File Security
**Rule**: The app must never attempt to upload the content of local media files to any server.
- **Processing**: All metadata extraction (ID3 tags) must happen client-side (via Web Workers).

## 5. Dependencies
**Rule**: No new NPM packages without an audit of their security history and license.

---

## Planned (Pending Execution)

- **Content Attribution**: Add attribution and complaint entry point for RSS content (Instruction 055).
- **Dependency Audit & License Policy**: CI enforcement for vulnerability and license checks (Instruction 078).
- **RSS Content CSS Isolation**: Scoped reset or Shadow DOM for show-notes (Instruction 082).
