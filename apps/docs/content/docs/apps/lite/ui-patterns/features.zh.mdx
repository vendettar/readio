---
title: 功能模式
---

## 运动与空间隐喻

- **共享元素转换**: 当持久元素 (如播客封面) 从一个视图移动到另一个视图 (例如 Mini Player 到 Full Player) 时，必须使用共享布局转换 (Framer Motion 中的 `layoutId`) 以保持空间方向。
- **layoutId 唯一性**：`layoutId` 必须包含视图上下文（如 `miniplayer`/`fullplayer`/`list`），避免多列表同时渲染时冲突。
- **入场动画**: 列表 (文件, 剧集) 不应立即出现。对项目使用交错淡入 + 上滑效果 (总持续时间: 300ms)。
- **应用启动**: 不要显示加载了一半的 UI。在 store 从 Dexie 恢复时，使用带有呼吸动画的居中应用 Logo。使用 `AnimatePresence` 淡出加载器。

## 文件拖放交互

- **全局放置区**: 在功能区域（如“文件”页面），整个内容区域都应作为拖放目标。
- **视觉反馈**: 当 `isDragActive` 触发时，使用带有 `backdrop-blur-md` 和 `bg-background/80`（毛玻璃效果）的区域/全屏覆盖层。
- **校验与提示**: 立即对照文件 Schema（类型/大小）进行校验。校验失败的文件必须触发错误 Toast 提示。
- **覆盖内容**: 显示显著的“放开以上传文件”消息，并配以动画图标（如跳动的上传图标）以确认活动状态。

## 计划中（待执行）

- **新手引导空状态**：订阅/文件/收藏/历史的首跑引导（指令 045）。
- **图片兜底策略**：加载骨架 + 失败兜底图标（指令 046）。
- **离线内容标识**：本地缓存标识与清理入口（指令 053）。
- **单集排序/筛选 UI**：提供排序/筛选控件（指令 054）。
