---
title: 领域规则
---

# 项目特定领域规则

这些规则专门通过 Readio 业务逻辑。

## 1. 全局搜索架构

- **搜索是一种模式，而非本地过滤器**:
  - 与当前页面内容解耦。
  - 从侧边栏触发。

- **两阶段体验**:
  1. **预览浮层**: 浮动下拉菜单 (限制 3-5 项)。
  2. **结果页面**: 全页路由 `/search?q=query`。

- **分组**:
  - 严格按 **内容类型** 分组 (剧集, 播客)。
  - 状态 (已播放, 已订阅) 是徽章，不是分组。

## 2. 音频与播放

- **Readio 身份**:
  - Readio 是一个**播放音频的阅读工具**，而不仅仅是音乐播放器。

- **逐字稿规则**:
  - **每个单词必须可见**。逐字稿上没有 `text-overflow: ellipsis`。
  - 激活行必须保持居中。

- **音频播放器生命周期**:
  - `<audio>` 元素在 `__root.tsx` 中是持久的。
  - 必须仔细管理事件监听器以避免内存泄漏。

- **剧集会话完整性**:
  - 如果剧集缺少 `podcastFeedUrl`，不要创建播放会话。

## 3. 文件系统与发现

- **文件密度**:
  - 视图密度设置 (`comfortable` / `compact`) 适用于整个 Files 页面。

- **规范化**:
  - 剧集 ID: 如果可用，使用 GUID；否则回退到 `trackId`。
  - 在路由中放置 `episodeId` 时始终 `encodeURIComponent`。
